
# Gradle Conversion Guide

## Step 1: Create New Branch for Gradle Conversion

First, create a new branch in your repository for this part of the assignment. Name it `tut-basic-gradle`.

```shell
git checkout -b tut-basic-gradle
```

## Step 2: Generate Gradle Spring Boot Project

Use [Spring Initializr](https://start.spring.io) to generate a new Gradle project with the specified dependencies (Rest Repositories, Thymeleaf, JPA, H2). 

- **Project:** Gradle Project
- **Language:** Java
- **Spring Boot:** Choose the version specified by your instructor or the latest stable version.
- **Project Metadata:** Fill as required.
- **Dependencies:** Rest Repositories, Thymeleaf, JPA, H2

After filling in the details, generate the project and unzip it into the folder `CA2/Part2/` in your repository.

## Step 3: Replace the `src` Folder

1. **Delete the generated `src` folder** inside `CA2/Part2/`.
   ```shell
   rm -r src
   ```
2. **Copy the `src` folder from the basic tutorial** into `CA2/Part2/`.
3. **Copy `webpack.config.js` and `package.json`** to `CA2/Part2/`.
4. **Delete `src/main/resources/static/built/`** since it will be regenerated.

## Step 4: Configure Gradle for Frontend Management

1. **Add the org.siouan.frontend Gradle plugin** to `build.gradle`:
   ```groovy
   plugins {
       id 'org.siouan.frontend-jdk17' version '8.0.0' 
   }
   ```
   Visit [frontend-gradle-plugin](https://github.com/Siouan/frontend-gradle-plugin) for more details.

2. **Configure the plugin in `build.gradle`**:
   ```groovy
   frontend {
       nodeVersion = '16.20.2'
       assembleScript = 'run build'
       cleanScript = 'run clean'
       checkScript = 'run check'
   }
   ```
3. **Update `package.json`** to include necessary scripts for Webpack:
   ```json
   "scripts": {
       "webpack": "webpack",
       "build": "npm run webpack",
       "check": "echo Checking frontend",
       "clean": "echo Cleaning frontend",
       "lint": "echo Linting frontend",
       "test": "echo Testing frontend"
   }
   ```
## Step 5: Build and Run the Application

1. **Build the project** with Gradle:
   ```shell
   ./gradlew build
   ```
   This will execute frontend tasks and generate the frontend code.

2. **Run the application**:
   ```shell
   ./gradlew bootRun
   ```

## Step 6: Additional Gradle Tasks

1. **Copy generated jar to `dist`**:
   Add this task to `build.gradle`:
   ```groovy
   task copyJar(type: Copy) {
       from 'build/libs'
       into 'dist'
       include '*.jar'
   }
   ```
   Execute it with:
   ```shell
   ./gradlew copyJar
   ```

2. **Delete webpack generated files before cleaning**:
   Add this task to `build.gradle`:
   ```groovy
   clean.dependsOn 'cleanFrontend'
   
   task cleanFrontend(type: Delete) {
       delete 'src/main/resources/static/built'
   }
   ```

## Step 7: Commit, Merge, and Document
git add .
git commit -m "Merge brach whit main . Closes #(nr issue)"

git checkout main
git merge --no-ff tut-basic-gradle

git push origin main


# Project Configuration with Bazel for Java

This guide outlines the basic setup of a Java project using Bazel.

## 1. Initial Bazel Setup

Ensure Bazel is installed on your system. Verify by running `bazel version` in the terminal.

## 2. Create Necessary Directory Structure and Files

Create an empty `WORKSPACE` file in the root directory of your project.

## 3. Configure Project Dependencies

Add your external dependencies in the `WORKSPACE` file:


## 4. Configure Java Project Build

In the directory of your Java source code, create a `BUILD` file:

```python
java_binary(
    name = "your_application_name",
    srcs = glob(["src/main/java/**/*.java"]),
    deps = [
        "@maven//:org_springframework_boot_spring_boot_starter_web",
        "@maven//:org_springframework_boot_spring_boot_starter_data_jpa",
        "@maven//:org_springframework_boot_spring_boot_starter_thymeleaf",
        "@maven//:com_h2database_h2",
        # Add other dependencies here
    ],
    main_class = "com.example.MainClass",
)
```

## 5. Build and Execution

To build your application, execute:

```bash
bazel build //:your_application_name
```

To run:

```bash
bazel run //:your_application_name
```

## 6. Configure Frontend (if applicable)

For projects with frontend components, additional rules like `rules_nodejs` may be needed to manage Node.js dependencies and frontend build tasks.

Note that this configuration may vary according to the specifics of your project.

